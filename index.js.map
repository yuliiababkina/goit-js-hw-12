{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export function createMarkup(array, gallery) {\n  const markup = array\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n              <img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\"  />\n            \n            <div class=\"gallery-info\">\n              <div class=\"gallery-info-titles\">\n                <p><b>Likes</b></p>\n                <p><b>Views</b></p>\n                <p><b>Comments</b></p>\n                <p><b>Downloads</b></p>\n              </div>\n              <div class=\"gallery-info-values\">\n                <p>${likes}</p>\n                <p>${views}</p>\n                <p>${comments}</p>\n                <p>${downloads}</p>\n              </div>\n            </div>\n            </a>\n          </li>`\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n","import axios from 'axios';\n\nconst API_KEY = '46809369-ad82ab8216a47e5b0b084ef25';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function getPictures(query, page) {\n  const response = await axios(`${BASE_URL}`, {\n    params: {\n      key: API_KEY,\n      q: query,\n      page,\n      per_page: 15,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n    },\n  });\n\n  return response.data;\n}\n","import { createMarkup } from './js/render-functions';\nimport { getPictures } from './js/pixabay-api';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst refs = {\n  form: document.querySelector('.form'),\n  gallery: document.querySelector('.gallery'),\n  loadMoreBtn: document.querySelector('.load-more'),\n  loader: document.querySelector('.loader'),\n};\n\nlet instance = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n  animationSpeed: 300,\n  overlay: true,\n  overlayOpacity: 0.7,\n});\n\nlet page;\nlet searchQuery;\nlet lastPage;\n\nrefs.form.addEventListener('submit', handleSearch);\nrefs.loadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function handleSearch(event) {\n  event.preventDefault();\n  searchQuery = event.currentTarget.searchQuery.value.trim();\n\n  if (!searchQuery) {\n    iziToast.info({\n      timeout: 3000,\n      position: 'topRight',\n      title: 'Sorry',\n      message: 'Please fill your search query in!',\n    });\n    return;\n  }\n\n  page = 1;\n  refs.gallery.innerHTML = '';\n  hideLoadMoreBtn();\n  showLoader();\n\n  try {\n    const response = await getPictures(searchQuery, page);\n\n    if (response.hits.length === 0) {\n      iziToast.error({\n        timeout: 3000,\n        position: 'topRight',\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      return;\n    }\n\n    createMarkup(response.hits, refs.gallery);\n    instance.refresh();\n\n    lastPage = Math.ceil(response.totalHits / response.hits.length);\n\n    if (lastPage === page) {\n      onEndOfSearchRequest();\n    } else {\n      showLoadMoreBtn();\n    }\n  } catch (error) {\n    iziToast.error({\n      timeout: 3000,\n      position: 'topRight',\n      title: 'Error',\n      message: 'Ooops, something went wrong. Please try again!',\n    });\n  } finally {\n    refs.form.reset();\n    hideLoader();\n  }\n}\n\nfunction showLoader() {\n  refs.loader.classList.remove('is-hidden');\n}\n\nfunction hideLoader() {\n  refs.loader.classList.add('is-hidden');\n}\n\nfunction showLoadMoreBtn() {\n  refs.loadMoreBtn.classList.remove('is-hidden');\n}\n\nfunction hideLoadMoreBtn() {\n  refs.loadMoreBtn.classList.add('is-hidden');\n}\n\nasync function onLoadMore() {\n  page += 1;\n  hideLoadMoreBtn();\n  showLoader();\n\n  try {\n    const response = await getPictures(searchQuery, page);\n    createMarkup(response.hits, refs.gallery);\n    instance.refresh();\n\n    if (lastPage === page) {\n      onEndOfSearchRequest();\n    } else {\n      showLoadMoreBtn();\n    }\n\n    const card = document.querySelector('.gallery-item');\n    const cardHeight = card.getBoundingClientRect().height;\n\n    window.scrollBy({\n      left: 0,\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    iziToast.error({\n      timeout: 3000,\n      position: 'topRight',\n      title: 'Error',\n      message: 'Ooops, something went wrong. Please try again!',\n    });\n  } finally {\n    hideLoader();\n  }\n}\n\nfunction onEndOfSearchRequest() {\n  hideLoadMoreBtn();\n\n  return iziToast.info({\n    timeout: 3000,\n    position: 'topRight',\n    title: 'Info',\n    message: 'We are sorry, but you have reached the end of search results.',\n  });\n}\n"],"names":["createMarkup","array","gallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","API_KEY","BASE_URL","getPictures","query","page","axios","refs","instance","SimpleLightbox","searchQuery","lastPage","handleSearch","onLoadMore","event","iziToast","hideLoadMoreBtn","showLoader","response","onEndOfSearchRequest","showLoadMoreBtn","hideLoader","cardHeight"],"mappings":"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"}